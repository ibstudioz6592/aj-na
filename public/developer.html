<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AJStudioz API - Developer Dashboard</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .logo {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 15px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            font-size: 24px;
            color: white;
        }
        
        h1 {
            color: #2c3e50;
            font-size: 28px;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #7f8c8d;
            font-size: 16px;
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            border-left: 4px solid #667eea;
        }
        
        .card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .feature {
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            text-align: center;
        }
        
        .feature-icon {
            font-size: 24px;
            margin-bottom: 10px;
        }
        
        .btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            text-decoration: none;
            display: inline-block;
            margin: 5px;
            transition: all 0.3s;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 13px;
            overflow-x: auto;
            margin: 15px 0;
        }
        
        .status {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
        }
        
        .status.online {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status.offline {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .api-key-generator {
            background: #e3f2fd;
            border: 1px solid #bbdefb;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }
        
        .generated-key {
            background: #f0f8f0;
            border: 1px solid #b4d7b4;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            font-family: monospace;
            word-break: break-all;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">üöÄ</div>
            <h1>AJStudioz AI Platform</h1>
            <p class="subtitle">Developer Dashboard - Manage your AI API access</p>
        </div>

        <div class="grid">
            <!-- API Status -->
            <div class="card">
                <h3>üîç API Status</h3>
                <div id="statusContainer">
                    <button onclick="checkApiStatus()" class="btn">Check Status</button>
                </div>
            </div>

            <!-- Features -->
            <div class="card">
                <h3>‚ú® Platform Features</h3>
                <div class="feature-grid">
                    <div class="feature">
                        <div class="feature-icon">üß†</div>
                        <div>Reasoning Models</div>
                    </div>
                    <div class="feature">
                        <div class="feature-icon">‚ö°</div>
                        <div>Streaming Support</div>
                    </div>
                    <div class="feature">
                        <div class="feature-icon">üîê</div>
                        <div>API Key Auth</div>
                    </div>
                    <div class="feature">
                        <div class="feature-icon">üìä</div>
                        <div>Usage Analytics</div>
                    </div>
                </div>
            </div>

            <!-- API Key Generator -->
            <div class="card">
                <h3>üîë Generate API Key</h3>
                <div class="api-key-generator">
                    <div class="form-group">
                        <label>Email:</label>
                        <input type="email" id="email" placeholder="your@email.com" required>
                    </div>
                    <div class="form-group">
                        <label>Plan:</label>
                        <select id="plan">
                            <option value="free">Free (1K requests/month)</option>
                            <option value="pro">Pro (100K requests/month)</option>
                            <option value="enterprise">Enterprise (Unlimited)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Key Name:</label>
                        <input type="text" id="keyName" placeholder="My API Key" value="My API Key">
                    </div>
                    <button onclick="generateApiKey()" class="btn">Generate API Key</button>
                    <div id="generatedKey" class="generated-key" style="display:none;"></div>
                </div>
            </div>

            <!-- Quick Test -->
            <div class="card">
                <h3>üß™ Quick API Test</h3>
                <div class="form-group">
                    <label>API Key:</label>
                    <input type="text" id="testApiKey" placeholder="aj-your-api-key" value="aj-demo123456789abcdef">
                </div>
                <div class="form-group">
                    <label>Model:</label>
                    <select id="testModel">
                        <option value="glm-4.6">GLM-4.6 (Reasoning)</option>
                        <option value="deepseek-r1">DeepSeek-R1 (Fast)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Message:</label>
                    <input type="text" id="testMessage" placeholder="Hello, AI!" value="Hello, what's your name?">
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="testStream"> Enable Streaming
                    </label>
                </div>
                <button onclick="testApi()" class="btn">Test API</button>
                <div id="testResult" class="code-block" style="display:none;"></div>
            </div>
        </div>

        <!-- Code Examples -->
        <div class="card">
            <h3>üìù Code Examples</h3>
            
            <h4>cURL (Non-streaming)</h4>
            <div class="code-block">curl -X POST "https://api.ajstudioz.dev/api/chat" \\
  -H "Content-Type: application/json" \\
  -H "X-API-Key: aj-your-api-key" \\
  -d '{
    "model": "glm-4.6",
    "messages": [{"role": "user", "content": "Hello!"}],
    "max_tokens": 150
  }'</div>

            <h4>cURL (Streaming)</h4>
            <div class="code-block">curl -X POST "https://api.ajstudioz.dev/api/chat" \\
  -H "Content-Type: application/json" \\
  -H "X-API-Key: aj-your-api-key" \\
  -d '{
    "model": "deepseek-r1",
    "messages": [{"role": "user", "content": "Explain AI"}],
    "stream": true
  }'</div>

            <h4>Python (OpenAI SDK)</h4>
            <div class="code-block">from openai import OpenAI

client = OpenAI(
    api_key="aj-your-api-key",
    base_url="https://api.ajstudioz.dev/api"
)

# Non-streaming
response = client.chat.completions.create(
    model="glm-4.6",
    messages=[{"role": "user", "content": "Hello!"}]
)

# Streaming
for chunk in client.chat.completions.create(
    model="deepseek-r1",
    messages=[{"role": "user", "content": "Hello!"}],
    stream=True
):
    print(chunk.choices[0].delta.content or "", end="")</div>

            <h4>JavaScript (Fetch API)</h4>
            <div class="code-block">// Non-streaming
const response = await fetch('https://api.ajstudioz.dev/api/chat', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'X-API-Key': 'aj-your-api-key'
  },
  body: JSON.stringify({
    model: 'glm-4.6',
    messages: [{ role: 'user', content: 'Hello!' }]
  })
});

const data = await response.json();
console.log(data.choices[0].message.content);

// Streaming
const response = await fetch('https://api.ajstudioz.dev/api/chat', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'X-API-Key': 'aj-your-api-key'
  },
  body: JSON.stringify({
    model: 'deepseek-r1',
    messages: [{ role: 'user', content: 'Hello!' }],
    stream: true
  })
});

const reader = response.body.getReader();
while (true) {
  const { done, value } = await reader.read();
  if (done) break;
  
  const chunk = new TextDecoder().decode(value);
  console.log(chunk);
}</div>
        </div>

        <div class="grid">
            <div class="card">
                <h3>üìö Documentation</h3>
                <p>Complete API documentation with examples, rate limits, and best practices.</p>
                <a href="/docs" class="btn">View Docs</a>
            </div>

            <div class="card">
                <h3>üìä Admin Dashboard</h3>
                <p>Monitor usage, manage users, and view system metrics.</p>
                <a href="/admin" class="btn">Open Dashboard</a>
            </div>
        </div>
    </div>

    <script>
        async function checkApiStatus() {
            const container = document.getElementById('statusContainer');
            container.innerHTML = '<p>Checking API status...</p>';
            
            const models = [
                { id: 'glm-4.6', name: 'GLM-4.6' },
                { id: 'deepseek-r1', name: 'DeepSeek-R1' }
            ];
            
            let results = [];
            
            for (const model of models) {
                try {
                    const response = await fetch('/api/chat', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-API-Key': 'aj-demo123456789abcdef'
                        },
                        body: JSON.stringify({
                            model: model.id,
                            messages: [{ role: 'user', content: 'ping' }],
                            max_tokens: 5
                        })
                    });
                    
                    if (response.ok) {
                        results.push(`<div class="status online">‚úÖ ${model.name} - Online</div>`);
                    } else {
                        results.push(`<div class="status offline">‚ùå ${model.name} - Offline</div>`);
                    }
                } catch (error) {
                    results.push(`<div class="status offline">‚ùå ${model.name} - Error: ${error.message}</div>`);
                }
            }
            
            container.innerHTML = results.join('');
        }

        async function generateApiKey() {
            const email = document.getElementById('email').value;
            const plan = document.getElementById('plan').value;
            const keyName = document.getElementById('keyName').value;
            
            if (!email) {
                alert('Please enter your email');
                return;
            }
            
            try {
                const response = await fetch('/api/keys', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        email: email,
                        plan: plan,
                        name: keyName
                    })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    const keyDiv = document.getElementById('generatedKey');
                    keyDiv.innerHTML = `
                        <h4>‚úÖ API Key Generated!</h4>
                        <p><strong>Key:</strong> ${data.api_key}</p>
                        <p><strong>Plan:</strong> ${data.plan}</p>
                        <p><strong>Limits:</strong> ${data.usage_limits.requests_per_month.toLocaleString()} requests/month</p>
                        <p style="color: #d32f2f; font-size: 12px;">${data.warning}</p>
                    `;
                    keyDiv.style.display = 'block';
                } else {
                    alert('Error: ' + data.error.message);
                }
            } catch (error) {
                alert('Error generating API key: ' + error.message);
            }
        }

        async function testApi() {
            const apiKey = document.getElementById('testApiKey').value;
            const model = document.getElementById('testModel').value;
            const message = document.getElementById('testMessage').value;
            const stream = document.getElementById('testStream').checked;
            const resultDiv = document.getElementById('testResult');
            
            if (!apiKey || !message) {
                alert('Please fill in API key and message');
                return;
            }
            
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = 'Testing API...';
            
            try {
                const response = await fetch('/api/chat', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-API-Key': apiKey
                    },
                    body: JSON.stringify({
                        model: model,
                        messages: [{ role: 'user', content: message }],
                        max_tokens: 150,
                        stream: stream
                    })
                });
                
                if (stream) {
                    resultDiv.innerHTML = 'Streaming response:\n\n';
                    const reader = response.body.getReader();
                    const decoder = new TextDecoder();
                    
                    while (true) {
                        const { done, value } = await reader.read();
                        if (done) break;
                        
                        const chunk = decoder.decode(value);
                        const lines = chunk.split('\n').filter(line => line.startsWith('data: '));
                        
                        for (const line of lines) {
                            const data = line.replace('data: ', '');
                            if (data === '[DONE]') {
                                resultDiv.innerHTML += '\n\n[Stream completed]';
                                break;
                            }
                            
                            try {
                                const parsed = JSON.parse(data);
                                if (parsed.choices && parsed.choices[0].delta.content) {
                                    resultDiv.innerHTML += parsed.choices[0].delta.content;
                                }
                            } catch (e) {
                                // Skip parsing errors
                            }
                        }
                    }
                } else {
                    const data = await response.json();
                    resultDiv.innerHTML = JSON.stringify(data, null, 2);
                }
            } catch (error) {
                resultDiv.innerHTML = 'Error: ' + error.message;
            }
        }

        // Auto-check status on page load
        window.addEventListener('load', () => {
            checkApiStatus();
        });
    </script>
</body>
</html>
